{% extends "base.html" %}

{% load i18n %}
{% load l10n %}
{% load crispy_forms_tags %}

{% block path %}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'home' %}">{% trans "Home" %}</a></li>
      <li class="breadcrumb-item">
        <a href="{% url 'sports-manager:player-list' owner.get_username %}">
          {% if user.get_username != owner.get_username and user.is_staff %}
            {% if full_name %}
              {% blocktrans with name=owner.get_full_name trimmed %}
                {{ name }}'s players
              {% endblocktrans %}
            {% else %}
              {% blocktrans with name=owner.get_username trimmed %}
                {{ name }}'s players
              {% endblocktrans %}
            {% endif %}
          {% else %}
            {% trans "My players" %}
          {% endif %}
        </a>
      </li>
      <li class="breadcrumb-item"><a href="{{ object.player.get_absolute_url }}">{{ object.player }}</a></li>
      <li class="breadcrumb-item"><a href="{% url 'sports-manager:player-medical-certificate-list' object.player.owner.get_username object.player.slug %}">{% trans "Medical certificates" %}</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ object.start|localize }} - {{ object.end|localize }}</li>
    </ol>
  </nav>
{% endblock %}

{% block page_title_buttons %}
  {% if user.get_username == object.player.owner.get_username or user.is_staff %}
    <div class="btn-group float-right" role="group">
      {% if object.can_be_renewed %}
        <a href="{% url 'sports-manager:player-medical-certificate-renew' object.player.owner.get_username object.player.slug object.pk %}" class="btn btn-primary btn-sm">{% trans "Renew" %}</a>
      {% endif %}
      <a href="{% url 'sports-manager:player-medical-certificate-update' object.player.owner.get_username object.player.slug object.pk %}" class="btn btn-primary btn-sm">{% trans "Update" %}</a>
      <a href="{% url 'sports-manager:player-medical-certificate-delete' object.player.owner.get_username object.player.slug object.pk %}" class="btn btn-danger btn-sm">{% trans "Delete" %}</a>
    </div>
  {% endif %}
{% endblock %}

{% block page_title %}
  {% blocktrans with full_name=object.player.full_name start=object.start|localize end=object.end|localize trimmed%}
    {{ full_name }}'s medical certificate details for {{ start }} / {{ end }}
  {% endblocktrans %}
{% endblock %}

{% block content %}
  <div class="alert alert-{% if object.validation == 1 %}warning{% elif object.validation == 2 %}success{% else %}danger{% endif %}">
    {% blocktrans with validation=object.get_validation_display trimmed %}
      This medical certificate is {{ validation }}.
    {% endblocktrans %}
  </div>

  <div class="row">
    <div class="col-md-2 font-weight-bold">{% trans "Starting date" %}</div><div class="col-md-4">{{ object.start }}</div>
    <div class="col-md-2 font-weight-bold">{% trans "Ending date" %}</div><div class="col-md-4">{{ object.end }}</div>
  </div>

  <div class="row">
    <div class="col-md-2 font-weight-bold">{% trans "Renewals" %}</div><div class="col-md-4">{{ object.renewals }}</div>
  </div>
  <div class="mb-4 d-block"></div>
  {% if object.file %}
    <a class="btn btn-primary" href="{{ object.file.url }}" role="button">{% trans "Download the file" %}</a>
  {% endif %}
  
  
{% endblock %}